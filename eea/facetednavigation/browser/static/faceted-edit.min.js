/******/ (function() { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ 610:
/***/ (function() {

var FacetedEdit;
if (window.FacetedEdit !== undefined) {
    FacetedEdit = window.FacetedEdit;
} else {
    FacetedEdit = window.FacetedEdit = { version: "15.0" };
}

FacetedEdit.loading = '<div class="faceted_loading"></div>';

// Widgets
FacetedEdit.Widgets = {};

/* Context url.
Default: (context related)
*/
FacetedEdit.BASEURL = "";

// Events
FacetedEdit.Events = {};
FacetedEdit.Events.RELOAD_WIDGETS = "FACETEDEDIT-RELOAD-WIDGETS";
FacetedEdit.Events.INITIALIZE_WIDGETS = "FACETEDEDIT-INITIALIZE-WIDGETS";
FacetedEdit.Events.POSITION_UPDATED = "FACETEDEDIT-POSITION-UPDATED";
FacetedEdit.Events.WINDOW_WIDTH_CHANGED = "FACETEDEDIT-WINDOW-WIDTH-CHANGED";
FacetedEdit.Events.WINDOW_HEIGHT_CHANGED = "FACETEDEDIT-WINDOW-HEIGHT-CHANGED";
FacetedEdit.Events.AJAX_START = "FACETEDEDIT-AJAX-START";
FacetedEdit.Events.AJAX_STOP = "FACETEDEDIT-AJAX-STOP";
FacetedEdit.Events.CATALOG_CHANGED = "FACETEDEDIT-CATALOG-CHANGED";

FacetedEdit.Window = {
    initialize: function () {
        this.width = jQuery(window).width();
        this.height = jQuery(window).height();

        var self = this;
        jQuery(window).on("resize", function () {
            self.width_change();
            self.height_change();
        });

        // Full screen icon clicked
        var fullscreen = jQuery("a:has(img#icon-full_screen)");
        if (fullscreen.length) {
            self.toggle_fullscreen(fullscreen);
        }
    },

    width_change: function () {
        var width = jQuery(window).width();
        if (width != this.width) {
            this.width = width;
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.WINDOW_WIDTH_CHANGED, {
                width: width,
            });
        }
    },

    height_change: function () {
        var height = jQuery(window).height();
        if (height != this.height) {
            this.height = height;
            jQuery(FacetedEdit.Events).trigger(
                FacetedEdit.Events.WINDOW_HEIGHT_CHANGED,
                { height: height }
            );
        }
    },

    toggle_fullscreen: function (button) {
        button.attr("href", "#");
        button.on("click", function () {
            var toggleFullScreenMode = window.toggleFullScreenMode;
            if (toggleFullScreenMode) {
                toggleFullScreenMode();
                jQuery(FacetedEdit.Events).trigger(
                    FacetedEdit.Events.WINDOW_WIDTH_CHANGED
                );
            }
            return false;
        });
    },
};

FacetedEdit.FormMessage = {
    initialize: function () {
        var self = this;
        // Add portal status message
        var context = jQuery("#faceted-edit-widgets-ajax");
        var msg = jQuery("<dl>")
            .addClass("portalMessage")
            .attr("id", "faceted-portal-status-message")
            .append(jQuery("<dt>").text("Info"));

        var msg_area = jQuery("<dd>").attr("id", "faceted-portal-status-message-area");

        var msg_close = jQuery("<span>")
            .addClass("ui-icon")
            .addClass("ui-icon-close")
            .attr("title", "Close message")
            .html(" ")
            .css({
                float: "right",
                margin: "0.5em",
            });

        msg.on("click", function () {
            self.msg.hide("slide", { direction: "down" });
        });

        msg.append(msg_close).append(msg_area);
        context.prepend(msg);
        this.msg = msg;
        this.msg_area = msg_area;
        this.msg.hide();

        var lock = jQuery("<div>");
        lock.attr("id", "faceted-portal-status-message-lock");
        lock.css("margin", "0px");
        context.prepend(lock);
        this.lock = jQuery("#faceted-portal-status-message-lock", context);

        this.lock.dialog({
            modal: true,
            closeOnEscape: false,
            autoOpen: false,
            draggable: false,
            resize: false,
            dialogClass: "faceted-loading-overlay",
        });
        this.lock.html(FacetedEdit.loading);

        // Events
        jQuery(FacetedEdit.Events).on(
            FacetedEdit.Events.AJAX_START,
            function (evt, data) {
                self.start(data.msg);
            }
        );
        jQuery(FacetedEdit.Events).on(
            FacetedEdit.Events.AJAX_STOP,
            function (evt, data) {
                self.stop(data.msg);
            }
        );
    },

    start: function (msg) {
        this.lock.dialog("open");
        this.update(msg);
    },

    stop: function (msg) {
        this.lock.dialog("close");
        this.update(msg);
    },

    update: function (msg, level) {
        if (!level) {
            level = "success";
        }
        this.msg.removeClass().addClass(level);
        this.msg_area.html(msg);
        if (!msg) {
            this.msg.hide("slide", { direction: "down" });
        } else {
            this.msg.show("slide", { direction: "down" });
        }
    },

    custom_message: function (text, area) {
        var msg = jQuery("#" + area + " .faceted-add-widget-dialog-msg");
        if (!msg.length) {
            var loading_text = jQuery("<span>");
            loading_text.attr("class", "portalMessage faceted-add-widget-dialog-msg");
            loading_text.css("display", "none");
            loading_text.html(text);
            jQuery("#" + area).append(loading_text);
        }
        msg = jQuery("#" + area + " .faceted-add-widget-dialog-msg");
        msg.fadeIn("slow", function () {
            msg.fadeOut("slow");
        });
    },
};

FacetedEdit.FormPosition = {
    initialize: function () {
        this.query = {};
    },

    submit: function (action) {
        this.update();
        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(action, this.query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.POSITION_UPDATED);
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },

    update: function () {
        var context = this;
        context.query = {};
        context.query.redirect = "";
        context.query.updatePosition_button = "Change";

        var positions = jQuery("#wposition option");
        positions.each(function () {
            var pos_val = jQuery(this).val();
            context.query[pos_val] = [];

            var widgets = jQuery("#faceted-" + pos_val + "-column div.faceted-widget");
            widgets.each(function () {
                var wid = jQuery(this).attr("id").split("_")[0];
                context.query[pos_val].push(wid);
            });
        });
    },
};

FacetedEdit.FormWidgets = {
    initialize: function () {
        this.form = jQuery("#faceted-edit-widgets");
        var form = this.form;
        jQuery(document).ajaxError(function () {
            jQuery(form).html(
                "<h3>This site encountered an error trying to fulfill your request</h3><p>If the error persists please contact the site maintainer. Thank you for your patience.</p>"
            );
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: "Error",
            });
        });
        jQuery(".faceted-edit-fieldset").hide();
        this.action = this.form.attr("action");
        this.form.css("display", "block");
        this.form.css("clear", "both");
        this.form.html(FacetedEdit.loading);
        this.update();

        // Confirm delete dialog
        var self = this;
        jQuery("#confirm-delete-dialog").dialog({
            bgiframe: true,
            autoOpen: false,
            modal: true,
            dialogClass: "faceted-ui-dialog",
            buttons: {
                Yes: function () {
                    var label = jQuery("strong", jQuery(this));
                    var wid = label.attr("id");
                    var cid = wid.split("_")[0];
                    jQuery("#" + wid).slideUp(function () {
                        self.delete_widget(cid);
                        jQuery("#" + wid).remove();
                    });
                    jQuery(this).dialog("close");
                },
                No: function () {
                    jQuery(this).dialog("close");
                },
            },
            create: function () {
                jQuery(this)
                    .closest(".ui-dialog")
                    .find(".ui-dialog-buttonset button")
                    .first()
                    .addClass("context btn btn-danger");
                jQuery(this)
                    .closest(".ui-dialog")
                    .find(".ui-dialog-buttonset button")
                    .last()
                    .addClass("standalone btn btn-secondary");
            },
        });

        // Events
        jQuery(FacetedEdit.Events).on(FacetedEdit.Events.RELOAD_WIDGETS, function () {
            self.update();
        });
    },

    update: function () {
        var context = this;
        var nocache = new Date();
        nocache = nocache.getTime();

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Refreshing ...",
        });
        jQuery.get(
            FacetedEdit.BASEURL + "@@faceted_widgets",
            { nocache: nocache },
            function (data) {
                context.form.html(data);

                jQuery("#faceted-results").html(
                    context.background_text("Results here", {
                        "padding-top": "2em",
                        "padding-bottom": "2em",
                    })
                );

                jQuery("div.faceted-widget").show();

                jQuery(".faceted-drag-drop").sortable({
                    items: ".faceted-widget",
                    connectWith: ".faceted-drag-drop",
                    placeholder: "ui-state-highlight",
                    forcePlaceholderSize: true,
                    opacity: 0.7,
                    delay: 300,
                    cursor: "crosshair",
                    tolerance: "pointer",
                    update: function (event, ui) {
                        if (!ui.sender) {
                            var parent = ui.item.parent();
                            if (jQuery(parent).hasClass("faceted-widgets")) {
                                FacetedEdit.FormPosition.submit(context.action);
                            }
                        }
                    },
                });

                jQuery(".faceted-widgets .ui-widget-header").disableSelection();
                jQuery("div.faceted-widget").on("dblclick", function () {
                    var wid = jQuery(this).attr("id");
                    context.edit_widget(wid);
                });

                jQuery("div.faceted-widget input[type=submit]").on("click", function () {
                    return false;
                });
                jQuery("div.faceted-widget a").on("click", function () {
                    return false;
                });

                // Add widget buttons
                var addbutton = jQuery("<span>");
                addbutton.attr("title", "Add widget here");
                addbutton.text(" + ");
                addbutton.attr("class", "ui-icon ui-icon-plus ui-corner-all");
                jQuery(".faceted-widgets").each(function () {
                    var container = jQuery(this);
                    var container_id = container.attr("id").split("---");
                    var position = container_id[0];
                    var section = container_id[1];
                    var local_addbutton = addbutton.clone();
                    local_addbutton.on("click", function () {
                        var dialog = jQuery("#faceted-edit-addwidget");
                        jQuery("#wposition", dialog).val(position);
                        jQuery("#wsection", dialog).val(section);
                        dialog.dialog("open");
                        FacetedEdit.FormAddWidgets.wtype_update(
                            FacetedEdit.FormAddWidgets.wtype.val()
                        );
                        return false;
                    });
                    var div = jQuery("<div>");
                    div.addClass("faceted-add-button");
                    div.append(local_addbutton);
                    container.prepend(div);
                });

                // Make portlets
                jQuery(".faceted-widget").each(function () {
                    var wid = jQuery(this).attr("id");
                    jQuery(this).attr(
                        "title",
                        "Click and drag to change widget position"
                    );
                    var cid = wid.split("_")[0];
                    var legend = jQuery("#" + wid + " legend");
                    legend.hide();

                    // Widget header
                    var header = jQuery("<div>");
                    header.attr("class", "ui-widget-header");

                    // Delete widget button
                    var header_del_button = jQuery("<div>");
                    header_del_button.attr("title", "Delete widget");
                    header_del_button.css("float", "right");
                    header_del_button.attr("class", "ui-icon ui-icon-trash");
                    header_del_button.html("x");
                    header_del_button.on("click", function () {
                        var confirm = jQuery("#confirm-delete-dialog");
                        var label = jQuery("strong", confirm);
                        label.attr("id", wid);
                        label.text(legend.text());
                        jQuery("#confirm-delete-dialog").dialog("open");
                    });

                    // Edit widget button
                    var header_edit_button = jQuery("<div>");
                    header_edit_button.attr("title", "Edit widget");
                    header_edit_button.css("float", "right");
                    header_edit_button.attr("class", "ui-icon ui-icon-pencil");
                    header_edit_button.html("e");
                    header_edit_button.on("click", function () {
                        context.edit_widget(cid);
                    });

                    // Hide/show widget button
                    var header_hide_button = jQuery("<div>");
                    var css = "ui-icon-unlocked";
                    if (jQuery("#" + wid).hasClass("faceted-widget-hidden")) {
                        header_hide_button.attr("title", "Show widget");
                        css = "ui-icon-locked";
                    } else {
                        header_hide_button.attr("title", "Hide widget");
                    }
                    header_hide_button.css("float", "right");
                    header_hide_button.attr("class", "ui-icon");
                    header_hide_button.addClass(css);
                    header_hide_button.html("h");
                    header_hide_button.on("click", function () {
                        context.hide_button_click(wid, cid);
                    });

                    // Widget title
                    var header_legend = jQuery("<div>");
                    header_legend.html(legend.html());

                    header.append(header_del_button);
                    header.append(header_edit_button);
                    header.append(header_hide_button);
                    header.append(header_legend);
                    legend.after(header);
                });

                FacetedEdit.Widgets = {};
                jQuery(FacetedEdit.Events).trigger(
                    FacetedEdit.Events.INITIALIZE_WIDGETS
                );
                jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                    msg: "Interface refreshed",
                });
            }
        );
    },

    background_text: function (text, css) {
        var div = jQuery("<div>");
        div.html(text);
        div.attr("class", "faceted-empty-column");
        if (css) {
            div.css(css);
        }
        return div;
    },

    delete_widget: function (criterion_id) {
        var query = {};
        query.path = criterion_id;
        query.deleteWidget_button = "Delete";
        query.redirect = "";
        jQuery.post(this.action, query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },

    edit_widget: function (widget_id) {
        FacetedEdit.FormEditWidget.edit(widget_id);
    },

    hide_button_click: function (widget_id, criterion_id) {
        var widget = jQuery("#" + widget_id);
        var action = FacetedEdit.BASEURL + "@@faceted_configure";
        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = criterion_id;

        if (widget.hasClass("faceted-widget-hidden")) {
            this.show_widget(widget_id);
            query["faceted." + criterion_id + ".hidden-empty-marker"] = 1;
        } else {
            this.hide_widget(widget_id);
            query["faceted." + criterion_id + ".hidden"] = "selected";
        }

        jQuery.post(action, query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },

    hide_widget: function (widget_id) {
        var button = jQuery("#" + widget_id + " div.ui-icon-unlocked");
        button.attr("title", "Show widget");
        button.removeClass("ui-icon-unlocked");
        button.addClass("ui-icon-locked");
        jQuery("#" + widget_id).addClass("faceted-widget-hidden");
    },

    show_widget: function (widget_id) {
        var button = jQuery("#" + widget_id + " div.ui-icon-locked");
        button.attr("title", "Hide widget");
        button.removeClass("ui-icon-locked");
        button.addClass("ui-icon-unlocked");
        jQuery("#" + widget_id).removeClass("faceted-widget-hidden");
    },
};

FacetedEdit.FormEditWidget = {
    initialize: function () {
        this.query = "";
        this.cid = null;
        var context = this;
        var form = jQuery(".faceted-edit-widget-dialog");
        if (!form.length) {
            form = jQuery("<form>");
            form.attr("class", "faceted-edit-widget-dialog");
            form.attr("title", "Edit widget");
            form.attr("id", "faceted-edit-widget-dialog");
            jQuery("#faceted-edit-widgets-ajax").append(form);
        }
        this.form = jQuery(".faceted-edit-widget-dialog");
        this.form.dialog({
            bgiframe: true,
            modal: true,
            autoOpen: false,
            dialogClass: "faceted-ui-dialog",
            buttons: {
                Save: function () {
                    var valid = FacetedEdit.FormValidator.validate(context.form);
                    if (valid) {
                        context.submit();
                        jQuery(this).dialog("close");
                    }
                },
                Cancel: function () {
                    jQuery(this).dialog("close");
                },
            },
            create: function () {
                jQuery(this)
                    .closest(".ui-dialog")
                    .find(".ui-dialog-buttonset button")
                    .first()
                    .addClass("context btn btn-primary");
                jQuery(this)
                    .closest(".ui-dialog")
                    .find(".ui-dialog-buttonset button")
                    .last()
                    .addClass("standalone btn btn-secondary");
            },
            close: function () {
                FacetedEdit.FormValidator.clear(context.form);
                context.form.html("");
            },
        });
    },

    edit: function (widget_id) {
        var context = this;
        context.cid = widget_id.split("_")[0];
        var query = {};
        query.criterion = widget_id;

        context.form.html(FacetedEdit.loading);
        context.form.dialog("open");
        jQuery.get(FacetedEdit.BASEURL + "@@faceted_schema", query, function (data) {
            context.form.html(data);

            //jQuery('.field-c0-form-c0-default').remove();
            var selector = ".field-" + context.cid + "-faceted-" + context.cid;
            jQuery(selector + "-default").remove();

            var catalog = jQuery(selector + "-index select");
            var operator = jQuery(selector + "-operator select");
            if (catalog.length && operator.length) {
                operator = operator.clone();
                jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.CATALOG_CHANGED, {
                    cid: context.cid,
                    catalog: catalog,
                    operator: operator,
                });
                catalog.on("change", function () {
                    jQuery(FacetedEdit.Events).trigger(
                        FacetedEdit.Events.CATALOG_CHANGED,
                        {
                            cid: context.cid,
                            catalog: catalog,
                            operator: operator,
                        }
                    );
                });
            }
            var widget = jQuery(".faceted-widget-edit", context.form);
            jQuery("ul", widget).addClass("formTabs").show();
            jQuery("li", widget).addClass("formTab");
            try {
                widget.tabs();
            } catch (e) {
                // BBB: jquery.tools.tabs
                jQuery("ul", widget).tabs("div.panes > div");
            }
        });
    },

    submit: function () {
        var action = FacetedEdit.BASEURL + "@@faceted_configure";
        this.update_query();
        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(action, this.query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.RELOAD_WIDGETS, {
                msg: data,
            });
        });
        return false;
    },

    update_query: function () {
        this.query = "cid=" + this.cid;
        this.query += "&redirect=&updateCriterion_button=Save&";
        this.query += this.form.serialize();
    },
};

FacetedEdit.FormAddWidgets = {
    initialize: function () {
        this.query = "";
        this.form = jQuery("#faceted-edit-addwidget");
        var context = this;
        jQuery("#faceted-edit-addwidget").dialog({
            bgiframe: true,
            modal: true,
            autoOpen: false,
            dialogClass: "faceted-ui-dialog",
            buttons: {
                Add: function () {
                    var valid = FacetedEdit.FormValidator.validate(context.form);
                    if (valid) {
                        context.submit(context.form);
                        jQuery(this).dialog("close");
                    }
                },
                Cancel: function () {
                    jQuery(this).dialog("close");
                },
            },
            create: function () {
                jQuery(this)
                    .closest(".ui-dialog")
                    .find(".ui-dialog-buttonset button")
                    .first()
                    .addClass("context btn btn-primary");
                jQuery(this)
                    .closest(".ui-dialog")
                    .find(".ui-dialog-buttonset button")
                    .last()
                    .addClass("standalone btn btn-secondary");
            },
            close: function () {
                FacetedEdit.FormValidator.clear(context.form);
                context.details.html("");
            },
        });
        this.wtype = jQuery("#wtype");

        this.details = jQuery("#faceted-widget-details");

        // Events
        this.form.on("submit", function (evt) {
            return context.submit(context.form, evt);
        });
        this.wtype.on("change", function (evt) {
            return context.wtype_change(this, evt);
        });

        jQuery("#faceted-edit-addwidget input[type=submit]").hide();
        jQuery("#faceted-field-wposition").hide();
        jQuery("#faceted-field-wsection").hide();
        jQuery("#faceted-widget-type .field", this.form).css("float", "left");
        var clear = jQuery("<div>");
        clear.html("&nbsp;");
        clear.css("clear", "both");
        jQuery("#faceted-widget-type", this.form).after(clear);
    },

    wtype_change: function (element) {
        FacetedEdit.FormValidator.clear(this.form);
        this.wtype_update(jQuery(element).val());
    },

    wtype_update: function (widget_type) {
        var faceted_query = {};
        faceted_query.criterion = "addformcriterion_widget";
        faceted_query.widget = widget_type;
        var context = this;

        jQuery.get(
            FacetedEdit.BASEURL + "@@faceted_schema",
            faceted_query,
            function (data) {
                FacetedEdit.FormMessage.custom_message(
                    "Loading...",
                    "faceted-widget-type"
                );
                context.details.html(data);
                var selector = ".field-c0-faceted-c0";
                jQuery(selector + "-default").hide();
                var catalog = jQuery(selector + "-index select");
                var operator = jQuery(selector + "-operator select");
                if (catalog.length && operator.length) {
                    operator = operator.clone();
                    catalog.on("change", function () {
                        jQuery(FacetedEdit.Events).trigger(
                            FacetedEdit.Events.CATALOG_CHANGED,
                            {
                                cid: "c0",
                                catalog: catalog,
                                operator: operator,
                            }
                        );
                    });
                }
                jQuery("#c0-layout-header").remove();
                jQuery("#c0-layout-tab").remove();
                var widget = jQuery(".faceted-widget-edit", context.details);
                jQuery("ul", widget).attr("class", "formTabs").show();
                jQuery("li", widget).attr("class", "formTab");
                try {
                    widget.tabs();
                } catch (e) {
                    // BBB: jquery.tools.tabs
                    jQuery("ul", widget).tabs("div.panes > div");
                }
            }
        );
    },

    submit: function (form) {
        this.update_query();

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Adding ...",
        });
        jQuery.post(form.attr("action"), this.query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.RELOAD_WIDGETS, {
                msg: data,
            });
        });
        return false;
    },

    update_query: function () {
        this.query = "redirect=&addPropertiesWidget_button=Add&";
        this.query += this.form.serialize();
        console.log(this.query);
    },
};

FacetedEdit.FormImportExport = {
    initialize: function () {
        jQuery(".faceted-exportimport-fieldset").hide();
        this.form = jQuery(".faceted-exportimport-fieldset form");
        this.form.on("submit", function () {
            return false;
        });

        var context = this;
        var buttons = jQuery("input[type=submit]", this.form);
        buttons.each(function () {
            var button = jQuery(this);
            var new_button = button.clone();
            new_button.on("click", function () {
                if (new_button.attr("name") == "export_button") {
                    context.export_xml();
                }
            });
            jQuery("#faceted-edit-widgets-ajax").prepend(new_button);
            button.remove();
        });

        var import_file = jQuery("#import_file");
        import_file.ajaxfileupload({
            action: this.form.attr("action"),
            params: {
                redirect: "",
                import_button: "Import",
            },
            valid_extensions: ["xml"],
            onComplete: function (response) {
                import_file.val("");
                if (!response.status && response.message) {
                    FacetedEdit.FormMessage.update(response.message, "error");
                    return false;
                }

                if (response.startsWith && response.startsWith("ERROR")) {
                    FacetedEdit.FormMessage.update(response, "error");
                    return false;
                }

                jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.RELOAD_WIDGETS, {
                    msg: response,
                });
                return true;
            },
        });

        jQuery("#import_button")
            .css("cursor", "pointer")
            .on("click", function () {
                import_file.trigger("click");
            });
    },

    export_xml: function () {
        var query = {};
        query.redirect = "";
        query.export_button = "Export";
        var action = this.form.attr("action");
        action += "?" + jQuery.param(query);
        return window.open(action, "_blank");
    },
};

FacetedEdit.FormValidator = {
    validate: function (form) {
        this.clear();

        var error = jQuery("<div>");
        error.attr("class", "dialog-error-header ui-state-error ui-corner-all");
        error.attr("id", "form-validator-errors");
        form.prepend(error);

        var valid = true;
        valid = valid && this.validate_numbers(form);
        valid = valid && this.validate_required(form);
        return valid;
    },

    validate_numbers: function (form) {
        var inputs = jQuery("#" + jQuery(form).attr("id") + " input[type=text]");
        var valid = true;
        var context = this;
        jQuery.each(inputs, function () {
            var input = jQuery(this);
            if (jQuery(this).attr("name").indexOf(":int") == -1) {
                return;
            }
            var value = input.val();
            value = parseInt(value, 10);
            if (value || value === 0) {
                input.val(value);
            } else {
                input.addClass("ui-state-error");
                context.error_message(form, input, "Invalid number");
                valid = false;
            }
        });
        return valid;
    },

    validate_required: function (form) {
        var valid = true;
        var elements = jQuery("div.field:has(span.required) :input", jQuery(form));

        var context = this;
        jQuery.each(elements, function () {
            var element = jQuery(this);
            var value = element.val();
            if (!value) {
                element.addClass("ui-state-error");
                context.error_message(form, element, "Value required");
                valid = false;
            }
        });
        return valid;
    },

    error_message: function (form, element, msg) {
        var error = jQuery("#form-validator-errors");
        var message = jQuery("<span>");
        message.attr("class", "ui-icon ui-icon-alert");
        message.css({ "float": "left", "margin-right": "0.3em" });
        error.append(message);

        var label_id = jQuery(element).attr("id").split("_")[1];
        var label = jQuery("label[for=" + label_id + "]");
        if (label.length) {
            var strong = jQuery("<strong>");
            strong.text(label.text() + ": ");
            error.append(strong);
        }
        error.append(msg);
        error.append('<div style="clear: both" />');
    },

    clear: function () {
        jQuery(".ui-state-error").removeClass("ui-state-error");
        jQuery(".submitting").removeClass(".submitting");
        jQuery("#form-validator-errors").remove();
    },
};

FacetedEdit.FormSections = {
    initialize: function () {
        this.initialized = false;
        this.context = null;
        this.selected = null;

        var context = this;
        jQuery(FacetedEdit.Events).on(
            FacetedEdit.Events.INITIALIZE_WIDGETS,
            function () {
                context.update();
            }
        );
    },

    update: function () {
        if (!this.initialized) {
            this.first_initialize();
            return;
        }
        jQuery(".faceted-section-header").remove();
        this.selected.removeClass("ui-tabs-selected");
        this.selected.click();
    },

    first_initialize: function () {
        var context = this;
        this.initialized = true;

        var column = jQuery(".faceted-column");
        if (!column.length) {
            return;
        }

        column = jQuery(column[0]);
        var sections = jQuery(".faceted-section-header", column);
        if (!sections.length) {
            return;
        }

        this.sections = sections.clone();
        jQuery(".faceted-section-header").remove();

        var div = jQuery("<div>");
        div.addClass("faceted-section-tabs");
        var ul = jQuery("<ul>").addClass("formTabs");

        this.sections.each(function () {
            var section = jQuery(this);
            var section_id = section.attr("id").split("---")[1];
            var li = jQuery("<li>");

            li.attr("id", "section-tabs-" + section_id);
            li.attr("class", "faceted-drag-drop formTab");
            li.on("click", function () {
                context.tab_clicked(this, section_id);
            });
            var a = jQuery("<a>");
            a.text(section.attr("title"));
            li.append(a);
            ul.append(li);
            if (!context.selected) {
                context.selected = li;
            }
        });

        div.append(ul);
        jQuery("#faceted-edit-widgets-ajax").after(div);

        this.context = div;
        this.selected.click();

        // Make it droppable
        var tabs = jQuery("li", this.context);
        tabs.sortable({
            items: ".faceted-widget",
            connectWith: ".faceted-drag-drop",
            placeholder: "ui-state-highlight",
            forcePlaceholderSize: false,
            opacity: 0.7,
            delay: 300,
            cursor: "crosshair",
            tolerance: "pointer",
            receive: function (evt, ui) {
                var tab = jQuery(this);
                if (tab.hasClass("ui-tabs-selected")) {
                    jQuery(ui.sender).sortable("cancel");
                    return;
                }
                context.receive_widget(ui.item, tab);
            },
        });
    },

    tab_clicked: function (tab, section_id) {
        this.selected = jQuery(tab);
        if (this.selected.hasClass("ui-tabs-selected")) {
            return false;
        }
        var tabs = jQuery("li", this.context);

        tabs.removeClass("ui-tabs-selected");
        this.selected.addClass("ui-tabs-selected");
        jQuery("a", tabs).removeClass("selected");
        jQuery("a", this.selected).addClass("selected");

        if (section_id == "all") {
            jQuery("div.faceted-widgets").show();
            return false;
        }
        jQuery("div.faceted-widgets").hide();
        jQuery("div.faceted-" + section_id + "-widgets").show();
        return false;
    },

    receive_widget: function (widget, section) {
        widget = jQuery(widget);
        section = jQuery(section);
        var context = this;
        widget.remove();
        var wid = widget.attr("id").split("_")[0];
        var sid = section.attr("id").replace("section-tabs-", "");
        context.selected = section;

        // Submit
        var action = FacetedEdit.BASEURL + "@@faceted_configure";
        var query = {
            redirect: "",
            updateCriterion_button: "Save",
            cid: wid,
        };
        query[wid + "_section"] = sid;

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(action, query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.RELOAD_WIDGETS, {
                msg: data,
            });
        });
    },
};

FacetedEdit.Catalog = {
    initialize: function () {
        this.types = {};
        var context = this;
        jQuery.getJSON(
            FacetedEdit.BASEURL + "@@faceted.catalog.types.json",
            {},
            function (data) {
                context.types = data;
            }
        );

        jQuery(FacetedEdit.Events).on(
            FacetedEdit.Events.CATALOG_CHANGED,
            function (evt, data) {
                context.handle_change(data.catalog, data.operator, data.cid);
            }
        );
    },

    get: function (key) {
        return this.types[key];
    },

    handle_change: function (catalog, operator, cid) {
        var select = jQuery("#faceted-" + cid + "-operator");
        var index = catalog.val();
        var mapping = this.get(index);
        var values = mapping ? mapping.operator : ["or"];

        select.empty();
        jQuery("option", operator).each(function () {
            var option = jQuery(this).attr("value");
            if (jQuery.inArray(option, values) != -1) {
                select.append(jQuery(this).clone());
            }
        });
    },
};

FacetedEdit.FormPage = {
    initialize: function () {
        this.cookie_id = "faceted-config-disable-ajax";
        var use_ajax = true;
        if (jQuery.cookie) {
            if (jQuery.cookie(this.cookie_id) === "disable") {
                use_ajax = false;
            }
            if (use_ajax) {
                this.add_ajax_button(
                    "Disable AJAX UI",
                    "configure_faceted.html",
                    "disable"
                );
            } else {
                this.add_ajax_button("Enable AJAX UI", "configure_faceted.html", null);
            }
        }

        if (use_ajax) {
            FacetedEdit.FormAddWidgets.initialize();
            FacetedEdit.FormImportExport.initialize();
            FacetedEdit.FormWidgets.initialize();
            FacetedEdit.FormMessage.initialize();
            FacetedEdit.FormPosition.initialize();
            FacetedEdit.FormEditWidget.initialize();
            FacetedEdit.Window.initialize();
            FacetedEdit.FormSections.initialize();
            FacetedEdit.Catalog.initialize();
        } else {
            jQuery("#faceted-edit-select-all-items").css("display", "inline");
        }
    },

    add_ajax_button: function (label, action, cookie) {
        var button = jQuery("<span>");
        var context = this;
        button.html("X");
        if (cookie) {
            button.attr("class", "ui-icon ui-icon-extlink");
        } else {
            button.attr("class", "ui-icon ui-icon-newwin");
        }
        button
            .attr("title", label)
            .addClass("faceted-ajax")
            .on("click", function () {
                jQuery.cookie(context.cookie_id, cookie);
                window.location.href = action;
            });
        jQuery(".documentFirstHeading").before(button);
    },
};

FacetedEdit.Load = function (evt, baseurl) {
    if (baseurl) {
        FacetedEdit.BASEURL = baseurl;
    }

    FacetedEdit.FormPage.initialize();
    // Override calendar close handler method in order to raise custom events
    if (window.Calendar) {
        window.Calendar.prototype.callCloseHandler = function () {
            // Original code
            if (this.onClose) {
                this.onClose(this);
            }
            this.hideShowCovered();
            // Custom events
            var wid = this.params.inputField.id;
            wid = wid.split("_")[2];
            if (!wid) {
                return false;
            }

            var widget = FacetedEdit.Widgets[wid];
            widget.set_default();
            return false;
        };
    }
};

FacetedEdit.Unload = function () {};

// Unload
jQuery(window).on("unload", function () {
    var context = jQuery("body").find(".faceted-edit-fieldset");
    if (context.length) {
        FacetedEdit.Unload();
    }
});

// Load
jQuery(function (evt) {
    var context = jQuery("body").find(".faceted-edit-fieldset");
    if (context.length) {
        FacetedEdit.Load(evt, context.data("baseurl"));
    }
});


/***/ }),

/***/ 904:
/***/ (function() {

FacetedEdit.AlphabeticalWidget = function (wid) {
    this.wid = wid;
    this.widget = jQuery("#" + wid + "_widget");
    this.letters = jQuery("span", this.widget);
    this.selected = jQuery(".faceted_letter_selected", this.widget);

    var js_widget = this;
    this.letters.on("click", function () {
        js_widget.letter_click(this);
    });
};

FacetedEdit.AlphabeticalWidget.prototype = {
    letter_click: function (letter) {
        this.set_default(letter);
    },

    letter_unselect: function (letter) {
        jQuery(letter).removeClass("faceted_letter_selected");
        this.selected = [];
    },

    letter_select: function (letter) {
        this.letter_unselect(this.letters);
        jQuery(letter).addClass("faceted_letter_selected");
        if (jQuery(letter).attr("id").split("-")[1] != "all") {
            this.selected = [letter];
        }
    },

    set_default: function (letter) {
        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = this.wid;

        var value = jQuery(letter).attr("id").split("-")[1];
        var selected_value = "";
        if (this.selected.length) {
            selected_value = jQuery(this.selected[0]).attr("id").split("-")[1];
        }
        if (value == selected_value) {
            this.letter_select(jQuery("#" + this.wid + "-all"), this.widget);
            value = "";
        } else {
            this.letter_select(letter);
        }

        if (value == "all") {
            value = "";
        }

        query["faceted." + this.wid + ".default"] = value;

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });

        return false;
    },
};

FacetedEdit.initializeAlphabeticalWidget = function () {
    jQuery("div.faceted-alphabetic-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.AlphabeticalWidget(wid);
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeAlphabeticalWidget
);


/***/ }),

/***/ 239:
/***/ (function() {

FacetedEdit.AutocompleteWidget = function (wid) {
    this.wid = wid;
    this.widget = jQuery("#" + wid + "_widget");
    this.button = jQuery("input[type=submit]", this.widget);
    this.input = jQuery("#" + this.wid);
    this.selected = this.input;

    var js_widget = this;
    this.button.on("click", function () {
        js_widget.set_default(this);
    });

    this.input.on("change", function () {
        js_widget.set_default(this);
    });
};

FacetedEdit.AutocompleteWidget.prototype = {
    set_default: function () {
        this.selected = this.input;
        var value = this.selected.val();

        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = this.wid;
        query["faceted." + this.wid + ".default"] = value;

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },
};

FacetedEdit.initializeAutocompleteWidget = function () {
    jQuery("div.faceted-autocomplete-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.AutocompleteWidget(wid);
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeAutocompleteWidget
);


/***/ }),

/***/ 893:
/***/ (function() {

FacetedEdit.CheckboxesWidget = function (wid) {
    var self = this;
    this.wid = wid;
    this.widget = jQuery("#" + wid + "_widget");
    this.fieldset = jQuery(".widget-fieldset", this.widget);
    this.elements = jQuery("input[type=checkbox]", this.widget);
    this.selected = jQuery("form input[type=checkbox]:checked", this.widget);
    this.boolean = this.widget.hasClass("faceted-boolean-widget");

    this.maxitems = parseInt(jQuery("span", this.widget).text(), 10);
    if (this.maxitems) {
        this.fieldset.collapsible({
            maxitems: this.maxitems,
            more: this.widget.data("more"),
            less: this.widget.data("less"),
        });
    }

    self.operatorValue = self.widget.data("operator");

    self.operator = self.widget.find(".faceted-operator a");
    if (self.operator.length) {
        self.operatorValue = self.operator.data("value");
        self.operator.text(self.operator.data(self.operatorValue));

        self.operator.on("click", function (evt) {
            evt.preventDefault();

            if (self.operatorValue === "or") {
                self.operatorValue = "and";
                self.operator.text(self.operator.data("and"));
            } else {
                self.operatorValue = "or";
                self.operator.text(self.operator.data("or"));
            }

            self.set_default(this);
        });
    }

    var js_widget = this;
    this.elements.on("click", function () {
        js_widget.set_default(this);
    });
    this.count();
};

FacetedEdit.CheckboxesWidget.prototype = {
    count: function () {
        if (!this.widget.hasClass("faceted-count")) {
            return;
        }
        jQuery("li", this.widget).each(function () {
            var li = jQuery(this);
            var number = Math.floor(Math.random() * 100);
            var span = jQuery("span", li);
            if (!span.length) {
                li.append(jQuery("<span>"));
                span = jQuery("span", li);
            }
            span.text("(" + number + ")");
        });
    },

    set_default: function () {
        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = this.wid;

        this.selected = this.widget.find("input[type=checkbox]:checked");

        var value = "";
        this.selected.each(function (idx) {
            if (idx > 0) {
                value += "\n";
            }
            value += jQuery(this).val();
        });

        if (this.boolean) {
            if (!value) {
                query["faceted." + this.wid + ".default-empty-marker"] = 1;
            } else {
                query["faceted." + this.wid + ".default"] = value;
            }
        } else {
            query["faceted." + this.wid + ".default"] = value;
            query["faceted." + this.wid + ".operator"] = this.operatorValue;
        }

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },
};

FacetedEdit.initializeCheckboxesWidget = function () {
    jQuery("div.faceted-checkboxes-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.CheckboxesWidget(wid);
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeCheckboxesWidget
);


/***/ }),

/***/ 56:
/***/ (function() {

FacetedEdit.DateWidget = function (wid) {
    var self = this;
    self.wid = wid;
    self.widget = jQuery("#" + wid + "_widget");

    self.select_from = jQuery("select[name=from]", this.widget);
    self.select_to = jQuery("select[name=to]", this.widget);

    // Bind events
    self.select_from.on("change", function () {
        self.set_default(self.select_from, self.select_to);
    });

    self.select_to.on("change", function () {
        self.set_default(self.select_from, self.select_to);
    });

    this.selected = [];
};

FacetedEdit.DateWidget.prototype = {
    set_default: function (from, to) {
        this.sync_ui();
        var from_val = from.val();
        var to_val = to.val();
        var value = "";
        if (from_val === "now-past" && to_val === "now_future") {
            value = "";
        } else {
            value = from_val + "=>" + to_val;
        }

        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = this.wid;
        query["faceted." + this.wid + ".default"] = value;

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },

    sync_ui: function () {
        this.select_from.find("option").attr("disabled", false);
        this.select_to.find("option").attr("disabled", false);

        var found;
        found = false;
        var from_value = this.select_from.val();
        this.select_to.find("option").each(function () {
            jQuery(this).attr("disabled", true);
            if (!found && this.value === from_value) {
                found = true;
                return false;
            }
        });

        found = false;
        var to_value = this.select_to.val();
        this.select_from.find("option").each(function () {
            if (this.value === to_value) {
                found = true;
            }
            if (found) {
                jQuery(this).attr("disabled", true);
            }
        });
    },
};

FacetedEdit.initializeDateWidget = function () {
    jQuery("div.faceted-date-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.DateWidget(wid);
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeDateWidget
);


/***/ }),

/***/ 202:
/***/ (function() {

FacetedEdit.DateRangeWidget = function (wid) {
    this.wid = wid;
    this.widget = jQuery("#" + wid + "_widget");

    this.yearRange = jQuery("input[name=calYearRange]", this.widget).val();
    this.start = jQuery("input[name=start]", this.widget);
    this.end = jQuery("input[name=end]", this.widget);
    this.usePloneFormat = jQuery("input[name=usePloneFormat]", this.widget).val();
    this.usePloneFormat = this.usePloneFormat == "True" ? true : false;
    this.dateFormat = jQuery("input[name=dateFormat]", this.widget).val();

    var js_widget = this;
    this.start.datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: this.dateFormat,
        yearRange: this.yearRange,
        onSelect: function (date) {
            js_widget.force_range();
            js_widget.set_default(date);
        },
    });

    this.end.datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: this.dateFormat,
        yearRange: this.yearRange,
        onSelect: function (date) {
            js_widget.set_default(date);
        },
    });

    this.start.on("change", function () {
        js_widget.force_range();
        js_widget.set_default(this);
    });

    this.end.on("change", function () {
        js_widget.set_default(this);
    });

    var start = this.start.val();
    if (start) {
        js_widget.force_range();
    }
};

FacetedEdit.DateRangeWidget.prototype = {
    force_range: function () {
        var start_date = this.start.datepicker("getDate");
        if (!start_date) {
            return;
        }
        this.end.datepicker("option", "minDate", start_date);
    },

    set_default: function () {
        var start = this.start.val();
        var end = this.end.val();
        if ((!start && end) || (start && !end)) {
            return;
        }

        var value = "";
        if (start && end) {
            var start_date;
            var end_date;
            if (this.usePloneFormat) {
                start_date = jQuery.datepicker.parseDate(this.dateFormat, start);
                end_date = jQuery.datepicker.parseDate(this.dateFormat, end);
            } else {
                start_date = new Date(start.replace(/-/g, "/"));
                end_date = new Date(end.replace(/-/g, "/"));
            }
            if (end_date < start_date) {
                var msg = "End Date should be greater than Start date";
                jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                    msg: msg,
                });
                return;
            }
            value = start + "=>" + end;
        }
        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = this.wid;
        query["faceted." + this.wid + ".default"] = value;

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },
};

FacetedEdit.initializeDateRangeWidget = function () {
    jQuery("div.faceted-daterange-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.DateRangeWidget(wid);
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeDateRangeWidget
);


/***/ }),

/***/ 67:
/***/ (function() {

FacetedEdit.DebugWidget = function (wid) {
    this.wid = wid;
    this.widget = jQuery("#" + wid + "_widget");
    this.query_area = jQuery("dd.debug-query pre", this.widget);
    this.after_area = jQuery("dd.debug-after pre", this.widget);
    this.config_area = jQuery("dd.debug-config pre", this.widget);
    this.count_area = jQuery("dd.debug-count pre", this.widget);

    jQuery("dd", this.widget).hide();
    jQuery("dt", this.widget).each(function () {
        var dt = jQuery(this);
        var css = dt.attr("class");
        var parent = dt.parent("dl");
        var minmax = jQuery("<span>").addClass("ui-icon ui-icon-plus");
        minmax.on("click", function () {
            var button = jQuery(this);
            jQuery("dd." + css, parent).toggle();
            if (button.hasClass("ui-icon-minus")) {
                button.removeClass("ui-icon-minus");
                button.addClass("ui-icon-plus");
            } else {
                button.removeClass("ui-icon-plus");
                button.addClass("ui-icon-minus");
            }
        });
        dt.prepend(minmax);
    });

    var js_widget = this;
    jQuery(FacetedEdit.Events).on(FacetedEdit.Events.AJAX_STOP, function (evt, data) {
        js_widget.update(data);
    });
};

FacetedEdit.DebugWidget.prototype = {
    update: function () {
        var context = this;
        var query = {};
        query["debugger"] = this.wid;
        query.mode = "edit";
        jQuery.get(
            FacetedEdit.BASEURL + "@@faceted.widget.debug.query",
            query,
            function (data) {
                if (data == "[]") {
                    jQuery(".debug-query", context.widget).hide();
                } else {
                    jQuery("dt.debug-query", context.widget).show();
                }
                context.query_area.text(data);
            }
        );
        jQuery.get(
            FacetedEdit.BASEURL + "@@faceted.widget.debug.after",
            query,
            function (data) {
                if (data == "[]") {
                    jQuery(".debug-after", context.widget).hide();
                } else {
                    jQuery("dt.debug-after", context.widget).show();
                }
                context.after_area.text(data);
            }
        );
        jQuery.get(
            FacetedEdit.BASEURL + "@@faceted.widget.debug.criteria",
            query,
            function (data) {
                if (data == "[]") {
                    jQuery(".debug-config", context.widget).hide();
                } else {
                    jQuery("dt.debug-config", context.widget).show();
                }
                context.config_area.text(data);
            }
        );
        jQuery.get(
            FacetedEdit.BASEURL + "@@faceted.widget.debug.counters",
            query,
            function (data) {
                if (data == "[]") {
                    jQuery(".debug-count", context.widget).hide();
                } else {
                    jQuery("dt.debug-count", context.widget).show();
                }
                context.count_area.text(data);
            }
        );
    },
};

FacetedEdit.initializeDebugWidget = function () {
    jQuery("div.faceted-debug-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.DebugWidget(wid);
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeDebugWidget
);


/***/ }),

/***/ 905:
/***/ (function() {

FacetedEdit.ETagWidget = function (wid) {
    this.wid = wid;
    this.widget = jQuery("#" + wid + "_widget");
    this.input = jQuery("#" + this.wid);
    this.selected = this.input;

    jQuery("form", this.widget).on("submit", function () {
        return false;
    });

    var js_widget = this;
    this.input.on("change", function () {
        js_widget.set_default(this);
    });
};

FacetedEdit.ETagWidget.prototype = {
    set_default: function () {
        this.selected = this.input;
        var value = this.selected.val();

        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = this.wid;
        query["faceted." + query.cid + ".default"] = value;

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },
};

FacetedEdit.initializeETagWidget = function () {
    jQuery("div.faceted-etag-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.ETagWidget(wid);
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeETagWidget
);


/***/ }),

/***/ 671:
/***/ (function() {

FacetedEdit.MultiSelectWidget = function (wid) {
    var self = this;
    this.wid = wid;
    this.widget = jQuery("#" + wid + "_widget");
    this.title = this.widget.find("legend").html();
    this.elements = jQuery("option", this.widget);
    this.select = jQuery("#" + this.wid);
    this.multiple = this.select.attr("multiple") ? true : false;
    this.placeholder = this.widget.data("placeholder");
    this.closeOnSelect = this.widget.data("closeonselect");
    this.ajax = this.widget.data("ajax");

    if (!this.ajax) {
        this.select.select2({
            placeholder: this.placeholder,
            closeOnSelect: this.closeOnSelect,
            allowClear: true,
        });
    } else {
        this.select.select2({
            placeholder: this.placeholder,
            closeOnSelect: this.closeOnSelect,
            allowClear: true,
            multiple: this.multiple,
            ajax: {
                url: this.ajax,
                dataType: "json",
                data: function (term) {
                    var query = {
                        q: term,
                    };
                    return query;
                },
                results: function (data) {
                    return {
                        results: data.items,
                    };
                },
            },
        });
    }

    self.operatorValue = self.widget.data("operator");

    self.operator = self.widget.find(".faceted-operator a");
    if (self.operator.length) {
        self.operatorValue = self.operator.data("value");
        self.operator.text(self.operator.data(self.operatorValue));

        self.operator.on("click", function (evt) {
            evt.preventDefault();

            if (self.operatorValue === "or") {
                self.operatorValue = "and";
                self.operator.text(self.operator.data("and"));
            } else {
                self.operatorValue = "or";
                self.operator.text(self.operator.data("or"));
            }

            self.set_default(this);
        });
    }

    // Handle change
    var js_widget = this;
    this.select.on("change", function () {
        js_widget.set_default(this);
    });

    this.count();
};

FacetedEdit.MultiSelectWidget.prototype = {
    count: function () {
        if (!this.widget.hasClass("faceted-count")) {
            return;
        }
        this.elements.each(function () {
            var option = jQuery(this);
            var number = Math.floor(Math.random() * 100);
            var option_txt = option.attr("title");
            option_txt += " (" + number + ")";
            option.html(option_txt);
        });
    },

    set_default: function () {
        var value = "";
        if (this.multiple) {
            jQuery(this.select.val()).each(function (idx, val) {
                if (idx > 0) {
                    value += "\n";
                }
                value += val;
            });
        } else {
            value = this.select.val();
        }

        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = this.wid;
        query["faceted." + this.wid + ".default"] = value;
        query["faceted." + this.wid + ".operator"] = this.operatorValue;

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },
};

FacetedEdit.initializeMultiSelectWidget = function () {
    jQuery("div.faceted-multiselect-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.MultiSelectWidget(wid);
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeMultiSelectWidget
);


/***/ }),

/***/ 875:
/***/ (function() {

FacetedEdit.PathWidget = function (wid) {
    var self = this;
    self.wid = wid;
    self.widget = jQuery(`#${wid}_widget`);
    self.tree = new FacetedTree.JsTree(self.wid, self.widget, "edit");
    self.initialize();
};

FacetedEdit.PathWidget.prototype = {
    initialize: function () {
        var self = this;
        self.form = self.widget.find("form");
        self.input = self.widget.find("input");
        self.selected = self.input;

        self.form.on("submit", function () {
            self.set_default(self.input);
            return false;
        });

        // Navigation Tree
        jQuery(FacetedTree.Events).on(FacetedTree.Events.CHANGED, function () {
            self.set_default(self.input);
        });
    },

    set_default: function (element) {
        var self = this;
        self.selected = element;
        var value = self.selected.val();

        var query = {
            redirect: "",
            updateCriterion_button: "Save",
            cid: self.wid,
            [`faceted.${self.wid}.default`]: value,
        };

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },
};

FacetedEdit.initializePathWidget = function () {
    jQuery("div.faceted-path-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.PathWidget(wid);
    });
};

jQuery(function () {
    jQuery(FacetedEdit.Events).on(
        FacetedEdit.Events.INITIALIZE_WIDGETS,
        FacetedEdit.initializePathWidget
    );
});


/***/ }),

/***/ 637:
/***/ (function() {

FacetedEdit.RadioWidget = function (wid) {
    this.wid = wid;
    this.widget = jQuery("#" + wid + "_widget");
    this.fieldset = jQuery(".widget-fieldset", this.widget);
    this.elements = jQuery("input[type=radio]", this.widget);
    this.selected = jQuery("input[type=radio]:checked", this.widget);
    this.maxitems = parseInt(jQuery("span", this.widget).text(), 10);
    if (this.maxitems) {
        this.fieldset.collapsible({
            maxitems: this.maxitems,
            more: this.widget.data("more"),
            less: this.widget.data("less"),
        });
    }

    var js_widget = this;
    this.elements.on("click", function () {
        js_widget.set_default(this);
    });
    this.count();
};

FacetedEdit.RadioWidget.prototype = {
    count: function () {
        if (!this.widget.hasClass("faceted-count")) {
            return;
        }
        jQuery("li", this.widget).each(function () {
            var li = jQuery(this);
            var number = Math.floor(Math.random() * 100);
            var span = jQuery("span", li);
            if (!span.length) {
                li.append(jQuery("<span>"));
                span = jQuery("span", li);
            }
            span.text("(" + number + ")");
        });
    },

    set_default: function (element) {
        if (this.selected.val() == jQuery(element).val()) {
            return;
        }

        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = this.wid;
        this.selected = jQuery("input[type=radio]:checked", this.widget);
        var value = this.selected.val();
        query["faceted." + this.wid + ".default"] = value;

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },
};

FacetedEdit.initializeRadioWidget = function () {
    jQuery("div.faceted-radio-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.RadioWidget(wid);
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeRadioWidget
);


/***/ }),

/***/ 506:
/***/ (function() {

FacetedEdit.RangeWidget = function (wid) {
    this.wid = wid;
    this.widget = jQuery("#" + wid + "_widget");

    this.start = jQuery("input[name=start]", this.widget);
    this.end = jQuery("input[name=end]", this.widget);

    var js_widget = this;
    this.start.on("change", function () {
        js_widget.set_default(this);
    });

    this.end.on("change", function () {
        js_widget.set_default(this);
    });
};

FacetedEdit.RangeWidget.prototype = {
    set_default: function () {
        var start = this.start.val();
        var end = this.end.val();
        if ((!start && end) || (start && !end)) {
            return;
        }

        var value = "";
        if (start && end) {
            if (end < start) {
                var msg = "End Date should be greater than Start date";
                jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                    msg: msg,
                });
                return;
            }
            value = start + "=>" + end;
        }
        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = this.wid;
        query["faceted." + this.wid + ".default"] = value;

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },
};

FacetedEdit.initializeRangeWidget = function () {
    jQuery("div.faceted-range-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.RangeWidget(wid);
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeRangeWidget
);


/***/ }),

/***/ 799:
/***/ (function() {

FacetedEdit.ResultsFilterWidget = function (wid) {
    var self = this;
    self.wid = wid;
    self.widget = jQuery("#" + wid + "_widget");
    self.form = jQuery("form", self.widget);
    self.input = jQuery("#" + self.wid);
    self.selected = self.input;

    self.form.on("submit", function () {
        self.set_default(self.input);
        return false;
    });

    self.input.on("change", function () {
        self.set_default(this);
    });
};

FacetedEdit.ResultsFilterWidget.prototype = {
    set_default: function () {
        var self = this;
        self.selected = self.input;
        var value = self.selected.val();

        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = self.wid;
        query["faceted." + self.wid + ".default"] = value;

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },
};

FacetedEdit.initializeResultsFilterWidget = function () {
    jQuery("div.faceted-resultsfilter-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.ResultsFilterWidget(wid);
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeResultsFilterWidget
);


/***/ }),

/***/ 638:
/***/ (function() {

FacetedEdit.ResultsPerPageWidget = function (wid) {
    this.wid = wid;
    this.widget = jQuery("#" + wid + "_widget");
    this.elements = jQuery("option", this.widget);
    this.select = jQuery("#" + this.wid);

    // Handle change
    var js_widget = this;
    this.select.on("change", function () {
        js_widget.set_default(this);
    });
};

FacetedEdit.ResultsPerPageWidget.prototype = {
    set_default: function () {
        var value = this.select.val();

        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = this.wid;
        query["faceted." + this.wid + ".default"] = value;

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },
};

FacetedEdit.initializeResultsPerPageWidget = function () {
    jQuery("div.faceted-resultsperpage-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.ResultsPerPageWidget(wid);
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeResultsPerPageWidget
);


/***/ }),

/***/ 511:
/***/ (function() {

FacetedEdit.SelectWidget = function (wid) {
    this.wid = wid;
    this.widget = jQuery("#" + wid + "_widget");
    this.elements = jQuery("option", this.widget);
    this.select = jQuery("#" + this.wid);
    this.value = this.select.val();

    // Handle change
    var js_widget = this;
    this.select.on("change", function () {
        js_widget.set_default(this);
    });

    this.count();
};

FacetedEdit.SelectWidget.prototype = {
    count: function () {
        if (!this.widget.hasClass("faceted-count")) {
            return;
        }
        this.elements.each(function () {
            var option = jQuery(this);
            var number = Math.floor(Math.random() * 100);
            var option_txt = option.attr("title");
            option_txt += " (" + number + ")";
            option.html(option_txt);
        });
    },

    set_default: function () {
        var value = this.select.val();

        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = this.wid;
        query["faceted." + this.wid + ".default"] = value;

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },
};

FacetedEdit.initializeSelectWidget = function () {
    jQuery("div.faceted-select-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.SelectWidget(wid);
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeSelectWidget
);


/***/ }),

/***/ 473:
/***/ (function() {

FacetedEdit.SortingWidget = function (wid) {
    this.wid = wid;
    this.widget = jQuery("#" + wid + "_widget");
    this.reverse = jQuery("#" + this.wid + "_reversed");
    this.elements = jQuery("option", this.widget);
    this.select = jQuery("#" + this.wid);
    this.value = this.select.val();

    // Handle select change
    var js_widget = this;
    this.select.on("change", function () {
        js_widget.set_default(this);
    });
    this.reverse.on("click", function () {
        js_widget.set_default(this);
    });
};

FacetedEdit.SortingWidget.prototype = {
    set_default: function () {
        var value = this.select.val();
        if (this.reverse.is(":checked")) {
            value += "(reverse)";
        }

        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = this.wid;
        query["faceted." + this.wid + ".default"] = value;

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },
};

FacetedEdit.initializeSortingWidget = function () {
    jQuery("div.faceted-sorting-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.SortingWidget(wid);
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeSortingWidget
);


/***/ }),

/***/ 530:
/***/ (function() {

FacetedEdit.TagsCloudWidget = function (wid) {
    this.wid = wid;
    this.widget = jQuery("#" + wid + "_widget");
    this.type = "tagscloud";
    this.tags = jQuery("li", this.widget);
    this.selected = jQuery(".faceted-tag-selected", this.widget);
    this.config = {};
    this.initialize();

    var js_widget = this;
    this.tags.on("click", function () {
        js_widget.tag_click(this);
    });
};

FacetedEdit.TagsCloudWidget.prototype = {
    initialize: function () {
        var cloud = jQuery("#" + this.wid + "-cloud", this.widget).text();
        cloud = cloud ? cloud : "list";
        var sizemin = jQuery("#" + this.wid + "-sizemin", this.widget).text();
        sizemin = parseInt(sizemin, 10);
        sizemin = sizemin ? sizemin : 10;
        var sizemax = jQuery("#" + this.wid + "-sizemax", this.widget).text();
        sizemax = parseInt(sizemax, 10);
        sizemax = sizemax ? sizemax : 20;
        var colormin = jQuery("#" + this.wid + "-colormin", this.widget).text();
        var colormax = jQuery("#" + this.wid + "-colormax", this.widget).text();
        var height = jQuery("#" + this.wid + "-height", this.widget).text();
        height = parseInt(height, 10);
        height = height ? height : 200;
        height = cloud == "list" ? "auto" : height;
        this.config = {
            type: cloud,
            sizemin: sizemin,
            sizemax: sizemax,
            height: height,
            colormin: colormin,
            colormax: colormax,
        };

        this.count();
        this.update();
    },

    update: function () {
        jQuery("#" + this.wid, this.widget).tagcloud(this.config);
    },

    count: function () {
        if (!this.widget.hasClass("faceted-count")) {
            return;
        }

        this.tags.each(function () {
            var tag = jQuery(this);
            var html = tag.text();
            html = html.replace(/\s\(\d+\)/, "");
            html += " (" + tag.attr("value") + ")";
            tag.html(html);
        });
    },

    tag_click: function (tag) {
        this.set_default(tag);
    },

    unselect: function (tag) {
        jQuery(tag).removeClass("faceted-tag-selected");
        this.selected = [];
    },

    select: function (tag) {
        this.unselect(this.tags);
        jQuery(tag).addClass("faceted-tag-selected");
        if (jQuery(tag).attr("id").replace(this.wid, "") != "all") {
            this.selected = [tag];
        }
    },

    set_default: function (tag) {
        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = this.wid;

        var value = jQuery(tag).attr("id").replace(this.wid, "");
        value = value.replace(/_-_/g, " ").replace(/_--_/g, "/");
        var selected_value = "";
        if (this.selected.length) {
            selected_value = jQuery(this.selected[0]).attr("id").replace(this.wid, "");
            selected_value = selected_value.replace(/_-_/g, " ").replace(/_--_/g, "/");
        }
        if (value == selected_value) {
            this.select(jQuery("#" + this.wid + "all", this.widget));
            value = "";
        } else {
            this.select(tag);
        }

        if (value == "all") {
            value = "";
        }
        query["faceted." + this.wid + ".default"] = value;

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },
};

FacetedEdit.initializeTagsCloudWidget = function () {
    jQuery("div.faceted-tagscloud-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.TagsCloudWidget(wid);
    });
};

FacetedEdit.resizeTagsCloudWidgets = function () {
    jQuery.each(FacetedEdit.Widgets, function (wid) {
        var js_widget = FacetedEdit.Widgets[wid];
        if (js_widget.type != "tagscloud") {
            return;
        }
        var width = js_widget.widget.width();
        jQuery("ul", js_widget.widget).width(width - 30);
        js_widget.update();
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeTagsCloudWidget
);

jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.POSITION_UPDATED,
    FacetedEdit.resizeTagsCloudWidgets
);

jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.WINDOW_WIDTH_CHANGED,
    FacetedEdit.resizeTagsCloudWidgets
);


/***/ }),

/***/ 211:
/***/ (function() {

FacetedEdit.TalWidget = function (wid) {
    var self = this;
    self.wid = wid;
    self.widget = jQuery("#" + wid + "_widget");
    self.form = jQuery("form", self.widget);
    self.input = jQuery("#" + self.wid);
    self.selected = self.input;

    self.form.on("submit", function () {
        self.set_default(self.input);
        return false;
    });

    self.input.on("change", function () {
        self.set_default(this);
    });
};

FacetedEdit.TalWidget.prototype = {
    set_default: function () {
        var self = this;
        self.selected = self.input;
        var value = self.selected.val();

        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = self.wid;
        query["faceted." + self.wid + ".default"] = value;

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },
};

FacetedEdit.initializeTalWidget = function () {
    jQuery("div.faceted-tal-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.TalWidget(wid);
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeTalWidget
);


/***/ }),

/***/ 830:
/***/ (function() {

FacetedEdit.TextWidget = function (wid) {
    this.wid = wid;
    this.widget = jQuery("#" + wid + "_widget");
    this.button = jQuery("input[type=submit]", this.widget);
    this.input = jQuery("#" + this.wid);
    this.selected = this.input;

    var js_widget = this;
    this.button.on("click", function () {
        js_widget.set_default(this);
    });

    this.input.on("change", function () {
        js_widget.set_default(this);
    });
};

FacetedEdit.TextWidget.prototype = {
    set_default: function () {
        this.selected = this.input;
        var value = this.selected.val();

        var query = {};
        query.redirect = "";
        query.updateCriterion_button = "Save";
        query.cid = this.wid;
        query["faceted." + this.wid + ".default"] = value;

        jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_START, {
            msg: "Saving ...",
        });
        jQuery.post(FacetedEdit.BASEURL + "@@faceted_configure", query, function (data) {
            jQuery(FacetedEdit.Events).trigger(FacetedEdit.Events.AJAX_STOP, {
                msg: data,
            });
        });
    },
};

FacetedEdit.initializeTextWidget = function () {
    jQuery("div.faceted-text-widget").each(function () {
        var wid = jQuery(this).attr("id");
        wid = wid.split("_")[0];
        FacetedEdit.Widgets[wid] = new FacetedEdit.TextWidget(wid);
    });
};

// Initialize
jQuery(FacetedEdit.Events).on(
    FacetedEdit.Events.INITIALIZE_WIDGETS,
    FacetedEdit.initializeTextWidget
);


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	!function() {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = function(module) {
/******/ 			var getter = module && module.__esModule ?
/******/ 				function() { return module['default']; } :
/******/ 				function() { return module; };
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	!function() {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = function(exports, definition) {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
!function() {
"use strict";
/* harmony import */ var _eea_facetednavigation_browser_javascript_edit_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(610);
/* harmony import */ var _eea_facetednavigation_browser_javascript_edit_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_browser_javascript_edit_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _eea_facetednavigation_widgets_alphabetic_edit_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(904);
/* harmony import */ var _eea_facetednavigation_widgets_alphabetic_edit_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_alphabetic_edit_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _eea_facetednavigation_widgets_autocomplete_edit_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(239);
/* harmony import */ var _eea_facetednavigation_widgets_autocomplete_edit_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_autocomplete_edit_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _eea_facetednavigation_widgets_checkbox_edit_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(893);
/* harmony import */ var _eea_facetednavigation_widgets_checkbox_edit_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_checkbox_edit_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _eea_facetednavigation_widgets_date_edit_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(56);
/* harmony import */ var _eea_facetednavigation_widgets_date_edit_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_date_edit_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _eea_facetednavigation_widgets_daterange_edit_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(202);
/* harmony import */ var _eea_facetednavigation_widgets_daterange_edit_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_daterange_edit_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _eea_facetednavigation_widgets_debug_edit_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(67);
/* harmony import */ var _eea_facetednavigation_widgets_debug_edit_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_debug_edit_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _eea_facetednavigation_widgets_etag_edit_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(905);
/* harmony import */ var _eea_facetednavigation_widgets_etag_edit_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_etag_edit_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _eea_facetednavigation_widgets_multiselect_edit_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(671);
/* harmony import */ var _eea_facetednavigation_widgets_multiselect_edit_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_multiselect_edit_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _eea_facetednavigation_widgets_path_edit_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(875);
/* harmony import */ var _eea_facetednavigation_widgets_path_edit_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_path_edit_js__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _eea_facetednavigation_widgets_radio_edit_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(637);
/* harmony import */ var _eea_facetednavigation_widgets_radio_edit_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_radio_edit_js__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _eea_facetednavigation_widgets_range_edit_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(506);
/* harmony import */ var _eea_facetednavigation_widgets_range_edit_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_range_edit_js__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var _eea_facetednavigation_widgets_resultsfilter_edit_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(799);
/* harmony import */ var _eea_facetednavigation_widgets_resultsfilter_edit_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_resultsfilter_edit_js__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var _eea_facetednavigation_widgets_resultsperpage_edit_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(638);
/* harmony import */ var _eea_facetednavigation_widgets_resultsperpage_edit_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_resultsperpage_edit_js__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var _eea_facetednavigation_widgets_select_edit_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(511);
/* harmony import */ var _eea_facetednavigation_widgets_select_edit_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_select_edit_js__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _eea_facetednavigation_widgets_sorting_edit_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(473);
/* harmony import */ var _eea_facetednavigation_widgets_sorting_edit_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_sorting_edit_js__WEBPACK_IMPORTED_MODULE_15__);
/* harmony import */ var _eea_facetednavigation_widgets_tagscloud_edit_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(530);
/* harmony import */ var _eea_facetednavigation_widgets_tagscloud_edit_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_tagscloud_edit_js__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _eea_facetednavigation_widgets_tal_edit_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(211);
/* harmony import */ var _eea_facetednavigation_widgets_tal_edit_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_tal_edit_js__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var _eea_facetednavigation_widgets_text_edit_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(830);
/* harmony import */ var _eea_facetednavigation_widgets_text_edit_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_eea_facetednavigation_widgets_text_edit_js__WEBPACK_IMPORTED_MODULE_18__);
// Edit


// Widgets





















}();
/******/ })()
;